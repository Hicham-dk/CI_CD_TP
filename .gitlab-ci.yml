stages:
  - build
  - test
  - docs
  - dist


build:
  stage: build
  script:
    - echo "Building the project with Ant..."
    - ant compile

  artifacts:
    paths:
      - /home/dosi/builds/8sy1vFyDz/0/dosi/pic/dakhouch_hicham/tp_ci_cd/dist/Tetris.jar
    expire_in: 1 week

test:
  stage: test
  script:
    - echo "Running tests with Ant..."
    - ant test
  dependencies:
    - build  # Retrieve artifacts generated by the build job

javadoc:
  stage: docs
  script:
    - echo "Generating Javadoc with Ant..."
    - ant javadoc

  dependencies:
    - build  # Ensure we use compiled classes from the build stage


dist:
  stage: dist
  script:
    - echo "Packaging the project into a JAR file with Ant..."
    - ant dist
  dependencies:
    - build  # Use artifacts generated from the build job

